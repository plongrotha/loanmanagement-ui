<!-- Table -->
<div class="bg-white rounded-lg shadow-md overflow-hidden">
  <div class="overflow-x-auto h-[410px] md:w-full">
    <table class="w-full">
      <thead class="bg-gray-50">
        <tr>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            App ID
          </th>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            Applicant
          </th>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            Loan Type
          </th>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            Amount
          </th>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            Duration
          </th>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            Submit Date
          </th>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            Status
          </th>
          <th
            class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"
          >
            Actions
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        @for (loanApplication of loanApplications; track $index) {
        <tr class="hover:bg-gray-50">
          <td
            class="px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
          >
            {{ $index + 1 }}
          </td>
          <td class="px-4 py-4 whitespace-nowrap">
            <div class="flex items-center">
              <div
                class="w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center text-white text-xs font-semibold"
              >
                {{
                  loanApplication.applicationResponse.applicantFullName
                    .charAt(0)
                    .toUpperCase() +
                    loanApplication.applicationResponse.applicantFullName
                      .charAt(
                        loanApplication.applicationResponse.applicantFullName
                          .length - 1
                      )
                      .toUpperCase()
                }}
              </div>
              <div class="ml-3">
                <p class="text-sm font-medium text-gray-900">
                  {{ loanApplication.applicationResponse.applicantFullName }}
                </p>
                <p class="text-xs text-gray-500">
                  {{ loanApplication.applicationResponse.email }}
                </p>
              </div>
            </div>
          </td>
          <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">
            {{ loanApplication.loanType }}
          </td>
          <td
            class="px-4 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"
          >
            {{
              loanApplication.loanAmount | currency : "USD" : "symbol" : "1.0-0"
            }}
          </td>
          @if (loanApplication.loanDurationInMonths == null) {
          <td class="px-4 py-4 whitespace-nowrap">
            <span
              class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"
              >N/A</span
            >
          </td>
          } @else {
          <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-900">
            {{ loanApplication.loanDurationInMonths }} months
          </td>
          }

          <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
            {{ loanApplication.updatedAt | date : "mediumDate" }}
          </td>

          @if (loanApplication.applicationStatus == "APPROVED") {
          <td class="px-4 py-4 whitespace-nowrap">
            <span
              class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"
              >{{ loanApplication.applicationStatus }}</span
            >
          </td>
          }@else if (loanApplication.applicationStatus == "PENDING") {
          <td class="px-4 py-4 whitespace-nowrap">
            <span
              class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"
              >{{ loanApplication.applicationStatus }}</span
            >
          </td>
          } @else if (loanApplication.applicationStatus == "REJECTED") {
          <td class="px-4 py-4 whitespace-nowrap">
            <span
              class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"
              >{{ loanApplication.applicationStatus }}</span
            >
          </td>
          }

          <td class="px-4 py-4 whitespace-nowrap text-sm">
            <button
              (click)="onView(loanApplication)"
              class="text-blue-600 hover:text-blue-900 cursor-pointer font-medium mr-3"
            >
              View
            </button>
            @if (loanApplication.applicationStatus == 'APPROVED') {
            <button [disabled]="true" class="text-green-800 font-medium">
              Approved
            </button>
            } @else if (loanApplication.applicationStatus == 'REJECTED') {
            <button [disabled]="true" class="text-red-800 font-medium">
              Rejected
            </button>
            } @else {
            <button
              (click)="onApprove(loanApplication)"
              class="text-green-600 hover:text-green-900 cursor-pointer font-medium mr-3"
            >
              Approve
            </button>
            <button
              (click)="onReject(loanApplication)"
              class="text-red-600 hover:text-red-900 cursor-pointer font-medium"
            >
              Reject
            </button>
            }
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <!-- <div
    class="px-4 py-4 bg-gray-50 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between gap-4"
  >
    <div class="text-sm text-gray-700">
      Showing <span class="font-medium">1</span> to
      <span class="font-medium">5</span> of
      <span class="font-medium">{{ totalApplications }}</span> results
    </div>
    <div class="flex gap-2">
      <button
        class="px-3 py-1 border cursor-pointer border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-100"
      >
        Previous
      </button>
      <button class="px-3 py-1 bg-blue-500 text-white rounded text-sm">
        1
      </button>
      <button
        class="px-3 py-1 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-100"
      >
        2
      </button>
      <button
        class="px-3 py-1 border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-100"
      >
        3
      </button>
      <button
        class="px-3 py-1 cursor-pointer border border-gray-300 rounded text-sm text-gray-700 hover:bg-gray-100"
      >
        Next
      </button>
    </div>
  </div> -->
</div>
