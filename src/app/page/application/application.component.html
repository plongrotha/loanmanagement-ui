<div class="max-w-5xl mx-auto p-6">
  <header class="flex flex-col sm:flex-row justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-800">Applications</h2>
    <p class="text-green-600 font-semibold mt-2 sm:mt-0">application works!</p>
  </header>

  <div class="flex flex-col sm:flex-row gap-3 mb-6">
    <div
      class="w-2.5/12 items-center text-white justify-center bg-blue-500 p-4 rounded-xl shadow"
    >
      <p class="text-2xl rounded-lg">
        {{ totalLoanApplicationsInComplet }}
      </p>
    </div>
    <input
      type="text"
      placeholder="Search by name, address, phone or national ID"
      class="w-full sm:flex-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
    />
    <!-- add the style -->

    <button
      type="button"
      (click)="clearSearch()"
      class="px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition"
    >
      Clear
    </button>
  </div>

  <!-- Table -->
  <div class="overflow-x-auto rounded-lg shadow">
    <table class="w-full text-left border-collapse">
      <thead class="bg-blue-600 text-white">
        <tr>
          <th class="py-3 px-4">#</th>
          <th class="py-3 px-4">Name</th>
          <th class="py-3 px-4">Address</th>
          <th class="py-3 px-4">Phone</th>
          <th class="py-3 px-4">National ID</th>
          <th class="py-3 px-4">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let app of applications; index as i"
          class="border-b hover:bg-gray-100 transition"
        >
          @if (app.loanRefundStatus === "COMPLETED") {
          <td class="py-2 px-4">{{ app.application.applicationId }}</td>
          <td class="py-2 px-4 font-medium">
            {{ app.application.applicantFullName }}
          </td>
          <td class="py-2 px-4">{{ app.application.address }}</td>
          <td class="py-2 px-4">{{ app.application.phoneNumber }}</td>
          <td class="py-2 px-4">{{ app.application.nationalId }}</td>
          <td class="py-2 px-4">
            <button
              (click)="openDetails(app)"
              class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition"
            >
              View
            </button>
          </td>
          }
        </tr>

        <tr *ngIf="applications.length === 0">
          <td colspan="6" class="text-center py-4 text-gray-500">
            No applications found.
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Detail Panel -->
  <aside
    *ngIf="selected"
    class="mt-6 border border-gray-300 rounded-xl p-5 bg-gray-50 shadow-inner"
  >
    <h3 class="text-xl font-semibold mb-3 text-gray-800">
      Application #{{ selected.application.applicationId }}
    </h3>
    <ul class="space-y-1 text-gray-700">
      <li>
        <strong>Name:</strong>
        {{ selected.application.applicantFullName }}
      </li>
      <li><strong>Address:</strong> {{ selected.application.address }}</li>
      <li><strong>Phone:</strong> {{ selected.application.phoneNumber }}</li>
      <li>
        <strong>National ID:</strong>
        {{ selected.application.nationalId }}
      </li>
      <li>
        <strong>Refund Status:</strong>
        <span class="bg-green-600 text-white mx-2 px-2 py-1 rounded">
          {{ selected.loanRefundStatus }}
        </span>
      </li>
    </ul>
    <button
      (click)="closeDetails()"
      class="mt-4 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition"
    >
      Close
    </button>
  </aside>
</div>
